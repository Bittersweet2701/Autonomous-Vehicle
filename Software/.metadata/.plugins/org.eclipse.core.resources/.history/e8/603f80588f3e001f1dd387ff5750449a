/*
 * Brushed_DC_Motor.h
 *
 *  Created on: Jul 10, 2024
 *      Author: admin
 */

#ifndef DRIVERS_BRUSHED_DC_MOTOR_BRUSHED_DC_MOTOR_H_
#define DRIVERS_BRUSHED_DC_MOTOR_BRUSHED_DC_MOTOR_H_

/*********************
 *      INCLUDES
 *********************/
#include <stdint.h>
#include "stm32f4xx_hal.h"
#include "stm32f4xx_hal_tim.h"

/**********************
 *      TYPEDEFS
 **********************/
struct BRUSHED_DC_Motor;
typedef struct BRUSHED_DC_Motor BRUSHED_DC_Motor_t;

enum DIRECTION_DC_MOTOR {CLOCKWISE = 0, COUNTER_CLOCKWISE};
enum SPEED_DC_MOTOR {STOP_SPEED = 0,
					LOW_SPEED,
					MEDIUM_SPEED,
					HIGH_SPEED};

typedef enum
{
	CLOCKWISE = 0,
	COUNTER_CLOCKWISE
} DIRECTION_DC_Motor_t;

typedef enum
{
	STOP_SPEED = 0,
	LOW_SPEED,
	MEDIUM_SPEED,
	HIGH_SPEED
} SPEED_DC_Motor_t;

struct BRUSHED_DC_Motor
{
	DIRECTION_DC_Motor_t direction;
	SPEED_DC_Motor_t speed;
	TIM_HandleTypeDef * timer_p;
	uint32_t timChannel;
	void (* set_speed)(BRUSHED_DC_Motor_t * const BRUSHED_DC_Motor_p);
};

/**********************
 *     OPERATION
 **********************/
BRUSHED_DC_Motor_t * BRUSHED_DC_Motor_Create(TIM_HandleTypeDef * timer_p, uint32_t timChannel, DIRECTION_DC_Motor_t direct);
void BRUSHED_DC_Motor_Destroy(BRUSHED_DC_Motor_t * const BRUSHED_DC_Motor_p);


#endif /* DRIVERS_BRUSHED_DC_MOTOR_BRUSHED_DC_MOTOR_H_ */
